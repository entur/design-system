---
name: File upload
description: FileUpload en komponent for å ta imot filer fra brukeren.
route: /komponenter/skjemaelementer/fileupload
parent: Komponenter
menu: Skjemaelementer
npmPackage: fileupload
tags: opplasting, fil, filer
---

import { Props } from 'docz';
import { FileUpload } from '@entur/fileupload';
import { ImageIcon } from '@entur/icons';
import { Playground } from '~/components/Playground';
import PageHeader from '~/components/PageHeader';
import { ImportStatement } from '~/components/ImportStatement';
import { Heading4 } from '@entur/typography';

<PageHeader />

<Playground>
  {() => {
    const [myFiles, setMyFiles] = React.useState([])
    const[error, setError] = React.useState(false);
    const onDelete = file  =>{
      console.log(file);
      const newFiles = [...myFiles];
      newFiles.splice(newFiles.indexOf(file), 1);
      setMyFiles([]);
    }
    const onDrop = React.useCallback((acceptedFiles) => {
      acceptedFiles.forEach((file) => {
      const reader = new FileReader()
      reader.onerror = () => setError(true);
      reader.onload = () => {
        setMyFiles([...myFiles, ...acceptedFiles]);
        const binaryStr = reader.result;
        console.log(binaryStr);
      }
      reader.readAsArrayBuffer(file)
    })
  }, [])
  return(<FileUpload accept="image/*" files={myFiles} errorUpload={error} onDrop={onDrop} onDelete={file => onDelete(file)} ></FileUpload>);
}}

</Playground>

## Komponenter

### FileUpload

<ImportStatement imports="FileUpload" />

<Props of={FileUpload} />

Bygger på react-dropzone, og vil spre props for den. Les mer om disse her: https://react-dropzone.js.org/#src

Komponenten har ingen validering eller forkasting av potensielt skadelige filer. **Dette er noe brukeren selv må stå for**.
Dette kan forenkles litt ved å bruke `accept` propen, som begrenser hvilke filtyper som vil aksepteres.

Les mer på [OWASP-artikkelen om filopplasting](https://owasp.org/www-community/vulnerabilities/Unrestricted_File_Upload).
